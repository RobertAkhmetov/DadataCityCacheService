# DadataCityCacheService

publish exe Работает локально, слушает на http://localhost:5000 (HTTP)
если запускать в visual studio исходники, слушает на https://localhost:7123 (HTTPS)

Команды HTTP GET
https://localhost:7123/api/addresses

ожидает в теле запроса строку, например
"мск центральная 11/-90"


Замечания:


Токен и секретный ключ могут не сработать! у меня 1 раз было, я перерегистрировался, если в логах 403 ошибка, нужна новая регистрация)

В случае получения из API dadata инфо ТОЛЬКО ПО ГОРОДУ нужно было сохранять и выводить только "fias_id","result", "geo_lat", "geo_lon", "timezone" (- это информация о городе)
я сделал так:
Если приходит запрос с названием города, но без дополнительной информации (fias_id = city_fias_id), я сохраняю в БД и(!) в ответе присылаю информацию о городе
Если приходит запрос с распознаваемым названием города, но улица и тп не распознались, в ответе присылаю информацию о городе

Требовался возвращаемый тип на запрос "массив данных", поэтому возвращается массив строк

Используется синглтоновый DadataApiClient

Логику специально оставил в контроллере, без медиатора и тп, чтобы немного сэкономить на времени исполнения

=========
Принимать должна на входе строку типа "мск сухонска 11/-89" или "г Москва" на выходе должна возвращать массив данных:
"fias_id", "region_with_type", "city_with_type", "street_with_type", "house", "flat" + информация из ранее сохраненных данных по населенному пункту
"fias_id","result", "geo_lat", "geo_lon", "timezone". Эти данные выводить дополнительно при поиске.
====== - в обоих перечислениях используется "fias_id", чтобы не повторялось, я использую единожды "fias_id" в начале ответа